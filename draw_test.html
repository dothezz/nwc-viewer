<html>
	<head>
			<meta charset="UTF-8">
	</head>

<body>
	<style>
	@font-face {
		font-family: "Bravura";

 		src:
			url("vendor/bravura-1.211/otf/Bravura.otf") format("opentype"),
			url("vendor/bravura-1.211/woff/Bravura.woff2") format("woff2"),
			url("vendor/bravura-1.211/woff/Bravura.woff") format("woff");
	}
    </style>


<script src="src/drawing.js"></script>

<script>


    canvas = document.createElement('canvas');
    canvas.style = 'font-family: Bravura'
	canvas.width = 800
	canvas.height = 400
	document.body.appendChild(canvas)
	ctx = canvas.getContext('2d')
	coddes = {
		e014: 'ledger',
		e050: 'treble',
		e05c: 'alto',
		e062: 'base',
    }
    


	render = () => {
		ctx.font = '40px Bravura'
		x = '\ue050 \ue014\ue014\ue014\ue014\ue014\ue014\ue014\ue014\ue014\ue014'
		// y = String.fromCharCode(0xe050)
		// console.log(x == y)

        baseline = 50
		ctx.textBaseline = 'alphabetic' // alphabetic  bottom top
		ctx.fillText(x, 0, baseline)

		ctx.rect(20, baseline - 40, 20, 40)
        ctx.stroke();
        

        drawing = new Drawing()

        s = new Stave()
        s.moveTo(300, baseline)

        s = new Stave()
        s.moveTo(40, 160)
        drawing.add(s)


        t = new Treble()
        t.moveTo(40, 160)
        t.positionY(2)
        drawing.add(t)

        drawing.draw(ctx)
        
	}

	// Trick from https://stackoverflow.com/questions/2635814/
	var image = new Image;
	image.src = 'vendor/bravura-1.211/otf/Bravura.otf';
	image.onerror = function() {
		setTimeout(render, 100)
	};




</script>

</body>